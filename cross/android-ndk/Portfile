# -*- coding: utf-8; mode: _tcl; tab-width: 2; indent-tabs-mode: nil; c-basic-offset: 2 -*- vim:fenc=utf-8:ft=tcl:et:sw=2:ts=2:sts=2

PortSystem          1.0

name                android-ndk
version             r17b

categories          java cross devel
maintainers         nomaintainer
license		          Apache-2
platforms           darwin
description         Android NDK
long_description    ${description} allows native development \
                    for the Android mobile platform.
supported_archs	    noarch

set prog            ${name}-${version}-darwin-x86.zip

homepage            https://developer.android.com/
master_sites        https://dl.google.com/android/repository

use_zip             yes
extract.mkdir       no

distname            ${name}-${version}-darwin-x86_64
worksrcdir          android-ndk-${version}

checksums           rmd160  16a77296153f9ab4153c81c7a6856365f9b1b891 \
                    sha256  d21072c04ffcf8a723a4dba3837c886bd30c18c0623a4d0ddc53850e2222d27f \
                    size    675091244

use_configure       no
build.cmd           true

destroot {
    xinstall -m 755 -d ${destroot}${prefix}/share/java

    system "
        cp -a ${worksrcpath} ${destroot}${prefix}/share/java/${distname};
        chgrp -R _developer  ${destroot}${prefix}/share/java/${distname};
        chmod -R g+w         ${destroot}${prefix}/share/java/${distname};
    "
}

notes "
${distname} has been made group _developer writable
set ANDROID_NDK to ${prefix}/share/java/android-ndk-${version}-darwin-x86_64??
"
# declare +devel variant
variant devel description {beta version } {
    version       r17-beta2
    checksums     sha1 883d7d1be3007637de7f2f2cb1f1bb66193d89e0 \
                  size 679061122
}
